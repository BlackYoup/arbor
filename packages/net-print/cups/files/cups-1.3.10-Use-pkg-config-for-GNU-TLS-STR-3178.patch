From e1feb41b86c9a53efc8276c0a243056310512efb Mon Sep 17 00:00:00 2001
From: mike <mike@7a7537e8-13f0-0310-91df-b6672ffda945>
Date: Mon, 4 May 2009 23:40:10 +0000
Subject: [PATCH] Use pkg-config for GNU TLS (STR #3178)

git-svn-id: http://svn.easysw.com/public/cups/trunk@8591 7a7537e8-13f0-0310-91df-b6672ffda945
---
 config-scripts/cups-ssl.m4 |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/config-scripts/cups-ssl.m4 b/config-scripts/cups-ssl.m4
index be641aa..a2cdd5c 100644
--- a/config-scripts/cups-ssl.m4
+++ b/config-scripts/cups-ssl.m4
@@ -64,11 +64,11 @@ if test x$enable_ssl != xno; then
     fi
 
     dnl Then look for GNU TLS...
-    if test "x${SSLLIBS}" = "x" -a "x${enable_gnutls}" != "xno"; then
+    if test "x${SSLLIBS}" = "x" -a "x${enable_gnutls}" != "xno" -a "x$PKGCONFIG" != x; then
     	AC_PATH_PROG(LIBGNUTLSCONFIG,libgnutls-config)
-	if test "x$LIBGNUTLSCONFIG" != x; then
-	    SSLLIBS=`$LIBGNUTLSCONFIG --libs`
-	    SSLFLAGS=`$LIBGNUTLSCONFIG --cflags`
+	if $PKGCONFIG --exists gnutls; then
+	    SSLLIBS=`$PKGCONFIG --libs gnutls`
+	    SSLFLAGS=`$PKGCONFIG --cflags gnutls`
 	    ENCRYPTION_REQUIRED="  Encryption Required"
 	    AC_DEFINE(HAVE_SSL)
 	    AC_DEFINE(HAVE_GNUTLS)
-- 
1.6.3.1

