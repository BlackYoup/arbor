Source: Ali Polatel <polatel@gmail.com>
Upstream: No (TODO)
Reason: Binding to 0.0.0.0 is bad, mmkay?

diff -ur curl-7.19.6/tests/server/sockfilt.c curl-7.19.6-sydbox/tests/server/sockfilt.c
--- curl-7.19.6/tests/server/sockfilt.c	2009-06-13 23:50:28.000000000 +0300
+++ curl-7.19.6-sydbox/tests/server/sockfilt.c	2009-08-26 15:20:04.000000000 +0300
@@ -743,7 +743,7 @@
 #endif
     memset(&me, 0, sizeof(me));
     me.sin_family = AF_INET;
-    me.sin_addr.s_addr = INADDR_ANY;
+    inet_pton(AF_INET, "127.0.0.1", &(me.sin_addr));
     me.sin_port = htons(*listenport);
     rc = bind(sock, (struct sockaddr *) &me, sizeof(me));
 #ifdef ENABLE_IPV6
@@ -751,7 +751,7 @@
   else {
     memset(&me6, 0, sizeof(me6));
     me6.sin6_family = AF_INET6;
-    me6.sin6_addr = in6addr_any;
+    inet_pton(AF_INET6, "::1", &(me6.sin6_addr));
     me6.sin6_port = htons(*listenport);
     rc = bind(sock, (struct sockaddr *) &me6, sizeof(me6));
   }
diff -ur curl-7.19.6/tests/server/sws.c curl-7.19.6-sydbox/tests/server/sws.c
--- curl-7.19.6/tests/server/sws.c	2009-06-13 23:50:28.000000000 +0300
+++ curl-7.19.6-sydbox/tests/server/sws.c	2009-08-26 15:09:51.000000000 +0300
@@ -972,7 +972,7 @@
 #endif
     memset(&me, 0, sizeof(me));
     me.sin_family = AF_INET;
-    me.sin_addr.s_addr = INADDR_ANY;
+    inet_pton(AF_INET, "127.0.0.1", &(me.sin_addr));
     me.sin_port = htons(port);
     rc = bind(sock, (struct sockaddr *) &me, sizeof(me));
 #ifdef ENABLE_IPV6
@@ -980,7 +980,7 @@
   else {
     memset(&me6, 0, sizeof(me6));
     me6.sin6_family = AF_INET6;
-    me6.sin6_addr = in6addr_any;
+    inet_pton(AF_INET6, "::1", &(me6.sin6_addr));
     me6.sin6_port = htons(port);
     rc = bind(sock, (struct sockaddr *) &me6, sizeof(me6));
   }
diff -ur curl-7.19.6/tests/server/tftpd.c curl-7.19.6-sydbox/tests/server/tftpd.c
--- curl-7.19.6/tests/server/tftpd.c	2009-06-13 23:50:28.000000000 +0300
+++ curl-7.19.6-sydbox/tests/server/tftpd.c	2009-08-26 15:52:02.000000000 +0300
@@ -501,7 +501,7 @@
   if(!use_ipv6) {
 #endif
     me.sin_family = AF_INET;
-    me.sin_addr.s_addr = INADDR_ANY;
+    inet_pton(AF_INET, "127.0.0.1", &(me.sin_addr));
     me.sin_port = htons(port);
     rc = bind(sock, (struct sockaddr *) &me, sizeof(me));
 #ifdef ENABLE_IPV6
@@ -509,7 +509,7 @@
   else {
     memset(&me6, 0, sizeof(struct sockaddr_in6));
     me6.sin6_family = AF_INET6;
-    me6.sin6_addr = in6addr_any;
+    inet_pton(AF_INET6, "::1", &(me6.sin6_addr));
     me6.sin6_port = htons(port);
     rc = bind(sock, (struct sockaddr *) &me6, sizeof(me6));
   }
