Source: Upstream
Upstream: Yes
Reason: For liblvm2cmd.so filename
    $ ls -l /usr/lib64/liblvm2cmd.so
    lrwxrwxrwx 1 root root 14 2009-01-24 20:16 /usr/lib64/liblvm2cmd.so -> liblvm2cmd.so.*

From 6f86651b14882fd2a4d9bb7cc6801f6d7f49c110 Mon Sep 17 00:00:00 2001
From: Alasdair Kergon <agk@redhat.com>
Date: Fri, 14 Nov 2008 20:59:56 +0000
Subject: [PATCH] some makefile fixes for liblvm2cmd & remove some hardcoded .so

---
 libdm/Makefile.in |    4 ++--
 tools/Makefile.in |   18 +++++++++---------
 2 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/libdm/Makefile.in b/libdm/Makefile.in
index 43e1d92..e170b5c 100644
--- a/libdm/Makefile.in
+++ b/libdm/Makefile.in
@@ -95,8 +95,8 @@ install_ioctl_static: ioctl/libdevmapper.a
 $(VERSIONED_SHLIB): %.$(LIB_SUFFIX).$(LIB_VERSION_DM): $(interface)/%.$(LIB_SUFFIX)
 	rm -f $@
 	$(LN_S) $< $@
-	rm -f libdevmapper.so
-	$(LN_S) $< libdevmapper.so
+	rm -f libdevmapper.$(LIB_SUFFIX)
+	$(LN_S) $< libdevmapper.$(LIB_SUFFIX)
 
 .PHONY: distclean_lib distclean
 
diff --git a/tools/Makefile.in b/tools/Makefile.in
index 400dfae..74f15d8 100644
--- a/tools/Makefile.in
+++ b/tools/Makefile.in
@@ -79,13 +79,13 @@ endif
 
 LVMLIBS = -llvm
 
-CLEAN_TARGETS = liblvm2cmd.so liblvm2cmd.a liblvm2cmd-static.a lvm lvm.o \
+CLEAN_TARGETS = liblvm2cmd.$(LIB_SUFFIX) liblvm2cmd.a liblvm2cmd-static.a lvm lvm.o \
 		lvm2cmd.o lvm2cmd-static.o lvm2cmdlib.o lvm.static \
 		lvm.cflow lvm.xref lvm.tree lvm.rxref lvm.rtree \
 		lvmcmdlib.o lvm-static.o dmsetup.o
 
 ifeq ("@CMDLIB@", "yes")
-	TARGETS += liblvm2cmd.so
+	TARGETS += liblvm2cmd.$(LIB_SUFFIX)
 	INSTALL_LVM_TARGETS += $(INSTALL_CMDLIB_TARGETS)
 endif
 
@@ -129,7 +129,7 @@ liblvm2cmd-static.a: $(top_srcdir)/lib/liblvm.a $(OBJECTS) lvmcmdlib.o lvm2cmd-s
 	cat $(top_srcdir)/lib/liblvm.a > $@
 	$(AR) rs $@ $(OBJECTS) lvmcmdlib.o lvm2cmd-static.o
 
-liblvm2cmd.so: liblvm2cmd.a $(LDDEPS)
+liblvm2cmd.$(LIB_SUFFIX): liblvm2cmd.a $(LDDEPS)
 
 .commands: commands.h cmdnames.h Makefile
 	$(CC) -E -P cmdnames.h 2> /dev/null | \
@@ -155,17 +155,17 @@ lvm.tree: $(SOURCES)
 cflow: lvm.cflow lvm.xref lvm.tree lvm.rtree lvm.rxref
 endif
 
-install_cmdlib_dynamic: liblvm2cmd.so
-	$(INSTALL) -D $(OWNER) $(GROUP) -m 555 $(STRIP) liblvm2cmd.so \
-		$(libdir)/liblvm2cmd.so.$(LIB_VERSION)
-	$(LN_S) -f liblvm2cmd.so.$(LIB_VERSION) $(libdir)/liblvm2cmd.so
+install_cmdlib_dynamic: liblvm2cmd.$(LIB_SUFFIX)
+	$(INSTALL) -D $(OWNER) $(GROUP) -m 555 $(STRIP) liblvm2cmd.$(LIB_SUFFIX) \
+		$(libdir)/liblvm2cmd.$(LIB_SUFFIX).$(LIB_VERSION_LVM)
+	$(LN_S) -f liblvm2cmd.$(LIB_SUFFIX).$(LIB_VERSION_LVM) $(libdir)/liblvm2cmd.$(LIB_SUFFIX)
 	$(INSTALL) -D $(OWNER) $(GROUP) -m 444 lvm2cmd.h \
 		$(includedir)/lvm2cmd.h
 
 install_cmdlib_static: liblvm2cmd-static.a
 	$(INSTALL) -D $(OWNER) $(GROUP) -m 555 $(STRIP) liblvm2cmd-static.a \
-		$(libdir)/liblvm2cmd.a.$(LIB_VERSION)
-	$(LN_S) -f liblvm2cmd.a.$(LIB_VERSION) $(libdir)/liblvm2cmd.a
+		$(libdir)/liblvm2cmd.a.$(LIB_VERSION_LVM)
+	$(LN_S) -f liblvm2cmd.a.$(LIB_VERSION_LVM) $(libdir)/liblvm2cmd.a
 	$(INSTALL) -D $(OWNER) $(GROUP) -m 444 lvm2cmd.h \
 		$(includedir)/lvm2cmd.h
 
-- 
1.6.1

