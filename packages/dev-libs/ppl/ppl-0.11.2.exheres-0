# Copyright.2009 Bryan Ã˜stergaard
# Distributed under the terms of the GNU General Public License v2

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.11 ] ]

SUMMARY='Modern C++ library for the manipulation of numerical information that can be represented by points in some $n$-dimensional vector space'
HOMEPAGE="http://www.cs.unipr.it/ppl/"
DOWNLOADS="http://www.cs.unipr.it/${PN}/Download/ftp/releases/${PV}/${PNV}.tar.bz2"

LICENCES="GPL-3"
SLOT="0.11"
PLATFORMS="~amd64 ~x86"
MYOPTIONS="doc"
RESTRICT="test"

DEPENDENCIES="
    build:
        doc? ( app-doc/doxygen )
    build+run:
        dev-libs/gmp[>=4.1.3]
"

AT_M4DIR=( "m4" )
DEFAULT_SRC_CONFIGURE_PARAMS=(
    # Don't support Java, ML and Fortran interfaces for now
    --enable-interfaces="c cxx"
    --disable-valgrind-tests
)

src_prepare() {
    # Do not build documentation if not needed, saves a ton of X dependencies
    if option !doc ; then
        edo sed -i -e '/SUBDIRS =/s/doc//' {,Watchdog/}Makefile.am
    fi

    autotools_src_prepare
}

src_test_expensive() {
    emake check
}

