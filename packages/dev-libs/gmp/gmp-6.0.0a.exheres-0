# Copyright 2007 Bryan Ã˜stergaard
# Distributed under the terms of the GNU General Public License v2

require gnu [ suffix=xz ] easy-multibuild

SUMMARY="GNU Multiple Precision arithmetic library"
HOMEPAGE="http://${PN}lib.org"

REMOTE_IDS="freecode:${PN}"

UPSTREAM_DOCUMENTATION+="${HOMEPAGE}/manual/ [[ lang = en ]]"
UPSTREAM_RELEASE_NOTES="${HOMEPAGE}/${PN}$(ever range 1-2).html [[ lang = en ]]"

LICENCES="GPL-3 LGPL-3"
SLOT="6"
PLATFORMS="~amd64 ~arm ~x86"
MYOPTIONS="multibuild_c: 32 64
    platform: amd64 x86"

DEPENDENCIES="
    build:
        sys-devel/m4
    build+run:
        sys-libs/readline
        !dev-libs/gmp:0[<4.3.2-r1] [[
            description = [ File collisions which will probably break your system ]
        ]]
"

WORK=${WORKBASE}/${PNV%a}

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --enable-cxx
    --enable-fft
    --with-readline
)

configure_one_multibuild() {
    local a platform_to_abi=( amd64:64 x86:32 )
    for a in "${platform_to_abi[@]}"; do
        if option platform:${a%:*}; then
            ABI=${a#*:}
        fi
    done

    default
}

