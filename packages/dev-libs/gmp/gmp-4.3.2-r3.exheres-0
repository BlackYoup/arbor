# Copyright 2007 Bryan Ã˜stergaard
# Distributed under the terms of the GNU General Public License v2

require gnu [ suffix=bz2 ]

SUMMARY="GNU Multiple Precision arithmetic library"

LICENCES="GPL-2"
SLOT="0"
PLATFORMS="~amd64 ~arm ~x86"
MYOPTIONS="platform: amd64 x86"

DEPENDENCIES="
    build:
        sys-devel/m4
    post:
        dev-libs/gmp:5
"

DEFAULT_SRC_CONFIGURE_PARAMS=( --enable-cxx --hates=docdir )

src_configure() {
    local abi= hosts_bitness=(
        "32: arm-exherbo-linux-gnueabi armv7-unknown-linux-gnueabi armv7-unknown-linux-gnueabihf i686-pc-linux-gnu"
        "64: x86_64-pc-linux-gnu"
    )

    for abi in "${hosts_bitness[@]}"; do
        if has $(exhost --target) ${abi#*:} ; then
            abi=${abi%:*}
            break
        fi
    done
    [[ -n ${abi} ]] || die "$(exhost --target) not currently supported"

    ABI=${abi}

    default
}

src_install() {
    default

    edo rm -r "${IMAGE}"/usr/{$(exhost --target)/include,share/info/}
}

