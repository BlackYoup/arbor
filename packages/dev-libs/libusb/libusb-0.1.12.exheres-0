# Copyright 2008 Saleem Abdulrasool <compnerd@compnerd.org>
# Distributed under the terms of the GNU General Public License v2
# Based in part on 'libusb-0.1.12.ebuild' from Gentoo which is:
#    Copyright 1999-2007 Gentoo Foundation

require autotools

SUMMARY="Userspace access to USB devices"
HOMEPAGE="http://libusb.sourceforge.net/"
SRC_URI="mirror://sourceforge/${PN}/${P}.tar.gz"

LICENSE="LGPL-2"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS="debug doc"

DEPENDENCIES=""

# tests are not well encapsulated
RESTRICT="test"

src_prepare()
{
    sed -i -e 's:-Werror::' Makefile.am || die "failed to remove -Werror"
    eautoreconf
}

DEFAULT_SRC_CONFIGURE_OPTION_ENABLES=( "debug debug all" "doc build-docs" )

src_install()
{
    default

    if option doc ; then
        insinto /usr/share/doc/${PN}/html/
        dodoc doc/html/*.html
    fi
}
