# Copyright 2009 Ingmar Vanhassel
# Distributed under the terms of the GNU General Public License v2

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.10 ] ]

SUMMARY="A validating XML parser written in a portable subset of C++"
HOMEPAGE="http://xerces.apache.org/xerces-c/"
DOWNLOADS="mirror://apache/xerces/c/$(ever major)/sources/${PNV}.tar.gz"

LICENCES="Apache-2.0"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    build+run:
        net-misc/curl
"

AT_M4DIR=m4

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --enable-threads
    --enable-msgloader-iconv
    --enable-netaccessor-curl
    --enable-transcoder-gnuiconv
)

src_prepare() {
    sed -e 's|$(prefix)/msg|$(DESTDIR)/$(prefix)/share/xerces-c/msg|' \
        -i src/xercesc/util/MsgLoaders/MsgCatalog/Makefile.in || die "sed failed"
    autotools_src_prepare
}

