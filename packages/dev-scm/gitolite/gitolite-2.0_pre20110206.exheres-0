# Copyright 2011 Ingmar Vanhassel
# Distributed under the terms of the GNU General Public License v2

SUMMARY="Gitolite allows you to setup a centralised git server"
DESCRIPTION="
Gitolite allows you to setup a centralised git server, with very fine-grained access control and
many (many!) more powerful features.
"
HOMEPAGE="http://github.com/sitaramc/gitolite"
DOWNLOADS="http://dev.exherbo.org/~ingmar/distfiles/${PN}/${PNV}.tar.gz"

LICENCES="GPL-2"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
    build+run:
        dev-scm/git[>=1.6.2]
        user/git
        group/git
"

BUGS_TO="ingmar@exherbo.org"

WORK=${WORKBASE}

src_compile() {
    :
}

src_install() {
    dodir /etc/${PN} /usr/bin /usr/share/${PN}/hooks
    edo ./src/gl-system-install \
        "${IMAGE}"/usr/bin \
        "${IMAGE}"/etc/${PN}/ \
        "${IMAGE}"/usr/share/${PN}/hooks

    edo rm "${IMAGE}"/usr/bin/*.pm
    eval $(perl -V:vendorlib)
    insinto ${vendorlib}
    doins src/*.pm

    dodoc README.mkd doc/*.mkd
    docinto examples
    dodoc conf/example*
}

