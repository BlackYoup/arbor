# /etc/zsh/zprofile
# Copyright 2008 Bernd Steinhauser <berniyh@exherbo.org>
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'zprofile' from Gentoo, which is:
#     Copyright 1999-2008 Gentoo Foundation.


# Load environment settings from profile.env, which is created by
# "eclectic env update" from the files in /etc/env.d
if [[ -e /etc/profile.env ]] ; then
	. /etc/profile.env
fi

#077 would be more secure, but 022 is generally quite realistic
umask 022

# Set up PATH depending on whether we're root or a normal user.
# There's no real reason to exclude sbin paths from the normal user,
# but it can make tab-completion easier when they aren't in the
# user's PATH to pollute the executable namespace.
#
# It is intentional in the following line to use || instead of -o.
# This way the evaluation can be short-circuited and calling whoami is
# avoided.
if [[ "$EUID" = "0" ]] || [[ "$USER" = "root" ]] ; then
	PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:${ROOTPATH}"
else
	PATH="/usr/local/bin:/usr/bin:/bin:${PATH}"
fi
export PATH
unset ROOTPATH

shopts=$-
setopt nullglob
for sh in /etc/profile.d/*.sh ; do
	if [[ -r "$sh" ]] ; then
		. "$sh"
	fi
done
unsetopt nullglob
set -$shopts
unset sh shopts
