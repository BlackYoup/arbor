Reason: Test C05debug fails
Source: Upstream
Upstream: yes
---
From a305fd65b4f60cef3382a89caaa267c549430e29 Mon Sep 17 00:00:00 2001
From: pws <tailor@alioth.debian.org>
Date: Tue, 4 Nov 2008 09:51:21 +0000
Subject: [PATCH] 26006: remove dependence on system error message

---
 ChangeLog          |    5 +++++
 Test/C05debug.ztst |   10 ++++++++--
 2 files changed, 13 insertions(+), 2 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index 28cb6b2..9ade363 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,8 @@
+2008-11-04  Peter Stephenson  <pws@csr.com>
+
+	* 26006: Test/C05debug.ztst: remove dependence on system
+	error message.
+
 2008-11-03  Peter Stephenson  <pws@csr.com>
 
 	* unposted: Config/version.mk: update version to 4.3.9-dev-0.
diff --git a/Test/C05debug.ztst b/Test/C05debug.ztst
index b5515c9..5cbf18a 100644
--- a/Test/C05debug.ztst
+++ b/Test/C05debug.ztst
@@ -52,9 +52,15 @@
 	# Failure
 	exit 10
 	HERE
-  $ZTST_testdir/../Src/zsh -f ./zsh-trapreturn-bug2
+  $ZTST_testdir/../Src/zsh -f ./zsh-trapreturn-bug2 2>erroutput.dif
+  mystat=$?
+  (
+   setopt extendedglob
+   print ${"$(< erroutput.dif)"%%:[^:]#: ./fdasfsdafd}
+  )
+  (( mystat == 0 ))
 0: trapreturn handling bug is properly fixed
-?./zsh-trapreturn-bug2:5: no such file or directory: ./fdasfsdafd
+>./zsh-trapreturn-bug2:5
 
   fn() {
     setopt localtraps localoptions debugbeforecmd
-- 
1.6.0.3

