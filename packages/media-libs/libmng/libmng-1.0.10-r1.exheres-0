# Copyright 2008 Kim HÃ¸jgaard-Hansen
# Distributed under the terms of the GNU General Public License v2

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.11 1.10 ] ] easy-multibuild
require sourceforge [ suffix=tar.gz ]

SUMMARY="The Multitiple Network Graphics reference library"
HOMEPAGE="http://www.libmng.com/"

LICENCES="libmng"
SLOT="0"
PLATFORMS="~amd64 ~ppc64 ~x86"
MYOPTIONS="lcms multibuild_c: 32 64"

DEPENDENCIES="
    build+run:
        media-libs/jpeg[multibuild_c:*(?)?]
        lcms? ( media-libs/lcms[multibuild_c:*(?)?] )"

DEFAULT_SRC_CONFIGURE_OPTION_WITHS=( lcms )
DEFAULT_SRC_INSTALL_EXTRA_DOCS=( README.examples doc/{${PN}.txt,doc.readme} )

src_prepare() {
    #upstream does not handle autotools anymore
    #moved to unmaintained - we use it anyway
    edo cp makefiles/configure.in makefiles/Makefile.am .
    eautoreconf
}

