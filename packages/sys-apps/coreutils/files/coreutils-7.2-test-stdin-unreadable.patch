Source: Upstream http://lists.gnu.org/archive/html/bug-coreutils/2009-04/msg00010.html
Upstream: Yes
Reason: tests/mv/i3 fails if /dev/stdin is unreadable, for the paludisbuild user

From 4145a1e54cb45cbd65091a0be0475c1659c0a846 Mon Sep 17 00:00:00 2001
From: Jim Meyering <meyering@redhat.com>
Date: Wed, 1 Apr 2009 16:59:54 +0200
Subject: [PATCH] tests: skip mv/i-3 if /dev/stdin is unreadable

* tests/mv/i-3: Skip if /dev/stdin is unreadable.
Reported by Sergei Steshenko.
---
 THANKS       |    1 +
 tests/mv/i-3 |    3 +++
 2 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/THANKS b/THANKS
index 665a9ef..11f43ac 100644
--- a/THANKS
+++ b/THANKS
@@ -509,6 +509,7 @@ Santiago Vila Doncel                sanvila@unex.es
 Savochkin Andrey Vladimirovich      saw@msu.ru
 Scott Lurndal                       slurn@griffin.engr.sgi.com
 SÃ©bastien Maret                     smaret@umich.edu
+Sergei Steshenko                    sergstesh@yahoo.com
 Shing-Shong Shei                    shei@cs.indiana.edu
 Soeren Sonnenburg                   sonnenburg@informatik.hu-berlin.de
 Solar Designer                      solar@owl.openwall.com
diff --git a/tests/mv/i-3 b/tests/mv/i-3
index d1f119c..738605b 100755
--- a/tests/mv/i-3
+++ b/tests/mv/i-3
@@ -35,6 +35,9 @@ fail=0
 ls /dev/stdin >/dev/null 2>&1 \
   || skip_test_ 'there is no /dev/stdin file'
 
+test -r /dev/stdin 2>&1 \
+  || skip_test_ '/dev/stdin is not readable'
+
 mv f g < /dev/stdin > out 2>&1 & pid=$!
 sleep 1
 kill $pid
-- 
1.6.2.1

