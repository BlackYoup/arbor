# Copyright 2007 Peter Tersl√∏v Forsberg
# Based on work copyrighted to Gentoo Foundation.
# Distributed under the terms of the GNU General Public License v2

export_exlib_phases src_install pkg_preinst

SUMMARY="Sandbox gives some security assurance when installing packages"
HOMEPAGE="http://gentoo.org/"
DOWNLOADS="mirror://gentoo/${PNV}.tar.lzma"

LICENCES="GPL-2"
SLOT="0"
MYOPTIONS=""

DEPENDENCIES="
    build:
        app-arch/xz"

UPSTREAM_CHANGELOG="http://git.overlays.gentoo.org/gitweb/?p=proj/sandbox.git;a=log;h=refs/tags/v${PV}"

DEFAULT_SRC_PREPARE_PATCHES=( "${FILES}"/${PV}/ )

sandbox_src_install() {
    default

    keepdir /var/log/sandbox
    fowners root:paludisbuild /var/log/sandbox
    fperms 0770 /var/log/sandbox
}

sandbox_pkg_preinst() {
    chown root:paludisbuild "${IMAGE}"/var/log/sandbox
    chmod 0770 "${IMAGE}"/var/log/sandbox
}

