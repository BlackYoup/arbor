# Copyright 2009 Saleem Abdulrasool <compnerd@compnerd.org>
# Distributed under the terms of the GNU General Public License v2

SUMMARY="USB enumeration utilities"
DESCRIPTION="
usbutils is a utility for displaying information
about USB buses in the system and the devices connected to them.
"
HOMEPAGE="http://linux-usb.sourceforge.net"
DOWNLOADS="mirror://kernel/linux/utils/usb/${PN}/${PNV}.tar.xz"

LICENCES="GPL-2"
SLOT="0"
MYOPTIONS="python"

DEPENDENCIES="
    build:
        dev-util/pkg-config[>=0.9.0]
    build+run:
        dev-libs/libusb:1[>=1.0.0]
    run:
        sys-apps/usbutils-data
        python? ( dev-lang/python )
"

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --datarootdir=/usr/share
    --datadir=/usr/share/misc
    --disable-usbids
    --disable-zlib
)

src_prepare() {
    default

    edo sed -i -e '/^usbids/s:/usr/share:/usr/share/misc:' lsusb.py
}

src_install() {
    default

    option python || edo rm -f "${IMAGE}"/usr/bin/lsusb.py

    # emtpy directories
    edo rmdir "${IMAGE}"/usr/sbin
    edo rmdir "${IMAGE}"/usr/share/misc
}

