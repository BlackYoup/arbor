# Copyright 2008 Santiago M. Mola
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'docbook-sgml-dtd-3.1-r3.ebuild', which is:
#   Copyright 1999-2007 Gentoo Foundation

require sgml-catalog eutils

MY_P="docbk31"
DESCRIPTION="Docbook SGML DTD 3.1"
HOMEPAGE="http://www.docbook.org/sgml/"
SRC_URI="http://www.oasis-open.org/docbook/sgml/${PV}/${MY_P}.zip"

LICENSE="X11"
SLOT="3.1"
PLATFORMS="~amd64"
MYOPTIONS=""

DEPENDENCIES="
build:
    >=app-arch/unzip-5.41
run:
    app-text/sgml-common"

S=${WORKDIR}

SGML_CATALOGS=(
    "/etc/sgml/sgml-docbook-${PV}.cat
    /usr/share/sgml/docbook/sgml-dtd-${PV}/catalog"
    "/etc/sgml/sgml-docbook-${PV}.cat
    /etc/sgml/sgml-docbook.cat" )

DEFAULT_SRC_PREPARE_PATCHES=( "${FILESDIR}/${P}-catalog.diff" )

src_install () {
    insinto /usr/share/sgml/docbook/sgml-dtd-${PV}
    doins *.dcl *.dtd *.mod
    newins docbook.cat catalog

    dodoc *.txt
}
