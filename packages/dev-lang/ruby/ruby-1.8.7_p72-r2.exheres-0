# Copyright 2007, 2008 Richard Brown
# Distributed under the terms of the GNU General Public License v2

require ruby

PLATFORMS="~amd64 ~ppc64 ~x86"

MYOPTIONS="mbari"
HOMEPAGE+=" mbari? ( http://sites.google.com/site/brentsrubypatches/ )"

src_prepare() {
    default

    if option mbari; then
        expatch "${FILES}"/mbari-${PV}
    fi
}

src_test() {
    # These tests are currently broken with ruby uninstalled
    rm -rf test/{soap,wdsl} test/webrick/test_{filehandler,cgi}.rb || die "rm broken tests failed"

    ruby_src_test
}

