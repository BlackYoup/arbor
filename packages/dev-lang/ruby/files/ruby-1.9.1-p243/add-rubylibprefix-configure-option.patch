Source: Richard Brown
Upstream: Yes, http://redmine.ruby-lang.org/issues/show/1334
Reason: /usr/lib/ruby19/1.9 is silly

diff --git a/Makefile.in b/Makefile.in
index df30800..c0f9c11 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -23,6 +23,7 @@ libdir = @libdir@
 libexecdir = @libexecdir@
 datarootdir = @datarootdir@
 datadir = @datadir@
+rubylibprefix = @rubylibprefix@
 arch = @arch@
 sitearch = @sitearch@
 sitedir = @sitedir@
diff --git a/configure.in b/configure.in
index 31f2593..312d052 100644
--- a/configure.in
+++ b/configure.in
@@ -1989,7 +1989,14 @@ case "$target_os" in
     rubyw_install_name="$RUBYW_INSTALL_NAME"
     ;;
 esac
-RUBY_LIB_PREFIX=`eval echo \\"${libdir}/${RUBY_INSTALL_NAME}\\"`
+
+AC_ARG_WITH(rubylibprefix, 
+	    [  --with-rubylibprefix=DIR blah [[LIBDIR/RUBY_INSTALL_NAME]] ],
+	    [rubylibprefix=$withval],
+	    [rubylibprefix='${libdir}/${RUBY_INSTALL_NAME}'])
+
+RUBY_LIB_PREFIX=`eval echo \\"${rubylibprefix}\\"`
+AC_SUBST(rubylibprefix)

 AC_ARG_WITH(ruby-version,
 	    [  --with-ruby-version=STR ruby version string for version specific directories [[full]] (full|minor|STR)],
@@ -2007,13 +2014,13 @@ esac
 AC_ARG_WITH(sitedir,
 	    [  --with-sitedir=DIR      site libraries in DIR [[LIBDIR/ruby/site_ruby]]],
             [sitedir=$withval],
-            [sitedir='${libdir}/${RUBY_INSTALL_NAME}/site_ruby'])
+            [sitedir='${rubylibprefix}/site_ruby'])
 SITE_DIR=`eval echo \\"${sitedir}\\"`

 AC_ARG_WITH(vendordir,
 	    [  --with-vendordir=DIR    vendor libraries in DIR [[LIBDIR/ruby/vendor_ruby]]],
             [vendordir=$withval],
-            [vendordir='${libdir}/${RUBY_INSTALL_NAME}/vendor_ruby'])
+            [vendordir='${rubylibprefix}/vendor_ruby'])
 VENDOR_DIR=`eval echo \\"${vendordir}\\"`

 case "$target_os" in
diff --git a/mkconfig.rb b/mkconfig.rb
index d6a9d03..f1d2c94 100755
--- a/mkconfig.rb
+++ b/mkconfig.rb
@@ -140,7 +140,7 @@ end
 print(*v_fast)
 print(*v_others)
 print <<EOS
-  CONFIG["rubylibdir"] = "$(libdir)/$(ruby_install_name)/$(ruby_version)"
+  CONFIG["rubylibdir"] = "$(rubylibprefix)/$(ruby_version)"
   CONFIG["archdir"] = "$(rubylibdir)/$(arch)"
   CONFIG["sitelibdir"] = "$(sitedir)/$(ruby_version)"
   CONFIG["sitearchdir"] = "$(sitelibdir)/$(sitearch)"
