# Copyright 2008 Ingmar Vanhassel <ingmar@exherbo.org>
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'swig-1.3.35.ebuild' from Gentoo, which is:
#     Copyright 1999-2008 Gentoo Foundation.

RESTRICT="test"

DESCRIPTION="Simplified Wrapper and Interface Generator"
HOMEPAGE="http://www.swig.org/"
SRC_URI="mirror://sourceforge/${PN}/${P}.tar.gz"

LICENSE="as-is"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS="doc perl python ruby"

DEPENDENCIES="
build+run:
    perl? ( dev-lang/perl )
    python? ( dev-lang/python )
    ruby? ( dev-lang/ruby )"

src_configure() {
    econf \
        $(option_with perl perl5) \
        $(option_with python python) \
        $(option_with ruby ruby) \
        --without-chicken --without-clisp --without-doc --without-guile \
        --without-java --without-lua --without-mono --without-mzscheme \
        --without-ocaml --without-octave --without-php --without-pike \
        --without-R --without-tcl --without-tk
}

src_install() {
    emake DESTDIR="${D}" install
    dodoc ANNOUNCE CHANGES CHANGES.current FUTURE NEW README TODO
    if option doc; then
        dodir /usr/share/doc/${PF}
        insinto /usr/share/doc/${PF}
        doins -r Doc/{Devel,Manual}
    fi
}

