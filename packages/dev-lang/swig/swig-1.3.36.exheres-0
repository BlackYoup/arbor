# Copyright 2008 Ingmar Vanhassel <ingmar@exherbo.org>
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'swig-1.3.35.ebuild' from Gentoo, which is:
#     Copyright 1999-2008 Gentoo Foundation.

SUMMARY="Simplified Wrapper and Interface Generator"
HOMEPAGE="http://www.swig.org/"
DOWNLOADS="mirror://sourceforge/${PN}/${PNV}.tar.gz"

LICENCES="as-is"
SLOT="0"
PLATFORMS="~amd64 ~ppc64 ~x86"
MYOPTIONS="doc lua perl python ruby slowtests"

DEPENDENCIES="
    build:
        slowtests? ( dev-libs/boost )
    build+run:
        lua? ( dev-lang/lua:= )
        perl? ( dev-lang/perl:= )
        python? ( dev-lang/python:= )
        ruby? ( dev-lang/ruby:= )"

RESTRICT="!slowtests? ( test )"

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --without-{chicken,clisp,csharp,guile,java,mono,mzscheme,ocaml,octave,php4,pike,R,tcl,tk}
    --without-doc
)
DEFAULT_SRC_CONFIGURE_OPTION_WITHS=( lua "perl perl5" python ruby )
DEFAULT_SRC_INSTALL_EXTRA_DOCS=( NEW FUTURE )

src_install() {
    default

    if option doc; then
        dodir /usr/share/doc/${PNVR}
        insinto /usr/share/doc/${PNVR}
        doins -r Doc/{Devel,Manual}
    fi
}

