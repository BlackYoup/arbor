Index: Makefile
===================================================================
--- Makefile	(revision 133394)
+++ Makefile	(working copy)
@@ -19,12 +19,12 @@
 LLDB_BIN_DIR := $(PROJ_OBJ_ROOT)/$(BuildMode)/bin
 PYTHON_DIR := $(LLDB_BIN_DIR)
 ifeq ($(HOST_OS),Darwin)
-PYTHON_DEST_DIR := /Library/Python/$(shell python -c 'import sys; print sys.version[:3]')/site-packages
+PYTHON_DEST_DIR := $(DESTDIR)/Library/Python/$(shell python -c 'import sys; print sys.version[:3]')/site-packages
 else
-PYTHON_DEST_DIR := $(shell python -c 'import sys; print sys.exec_prefix')/lib/python$(shell python -c 'import sys; print sys.version[:3]')/site-packages
+PYTHON_DEST_DIR := $(DESTDIR)$(shell python -c 'import sys; print sys.exec_prefix')/lib/python$(shell python -c 'import sys; print sys.version[:3]')/site-packages
 endif
 LLDB_SWIG_INCLUDE_DIRS:= -I"$(PROJ_SRC_DIR)/$(LLDB_LEVEL)/include" -I./.
-LIBLLDB := $(DESTDIR)$(PROJ_libdir)/liblldb$(SHLIBEXT)
+LIBLLDB := liblldb$(SHLIBEXT)
 
 # We need Swig to process stdint.h, but by default it will not inspect system
 # include directories.  The following should cover the standard locations on
@@ -46,10 +46,10 @@
 			 "$(PROJ_OBJ_DIR)/LLDBWrapPython.cpp"; fi
 	$(Verb) cp "$(PROJ_SRC_DIR)/embedded_interpreter.py" "$(PYTHON_DIR)"
 
-install-local:: $(PYTHON_DIR)/lldb.py $(PYTHON_DIR)/embedded_interpreter.py $(LIBLLDB)
+install-local:: $(PYTHON_DIR)/lldb.py $(PYTHON_DIR)/embedded_interpreter.py
 	$(Echo) Installing $(BuildMode) LLDB python modules
 	$(Verb) $(MKDIR) $(PYTHON_DEST_DIR)/lib-dynload
 	$(Verb) $(DataInstall) $(PYTHON_DIR)/lldb.py $(PYTHON_DEST_DIR)/lldb.py
 	$(Verb) $(DataInstall) $(PYTHON_DIR)/embedded_interpreter.py $(PYTHON_DEST_DIR)/embedded_interpreter.py
 	$(Verb) $(RM) -f $(PYTHON_DEST_DIR)/lib-dynload/_lldb.so
-	$(Verb) $(AliasTool) $(LIBLLDB) $(PYTHON_DEST_DIR)/lib-dynload/_lldb.so
+	$(Verb) $(AliasTool) $(PROJ_libdir)/$(LIBLLDB) $(PYTHON_DEST_DIR)/lib-dynload/_lldb.so
