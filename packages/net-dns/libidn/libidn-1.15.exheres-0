# Copyright 2008 Santiago M. Mola
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'libidn-1.5-r1.ebuild' from Gentoo, which is:
#     Copyright 1999-2008 Gentoo Foundation

require gnu [ suffix=gz ]

SUMMARY="Internationalized Domain Names (IDN) implementation"

LICENCES="GPL-3             [[ description = [ Command line tool, self tests, examples, and other auxilliary files ] ]]
    || ( LGPL-3 LGPL-2.1 )  [[ description = [ C, Java libraries ] ]]"
SLOT="0"
PLATFORMS="~amd64 ~ppc64 ~x86"
MYOPTIONS="doc nls"

DEPENDENCIES=""

# FIXME: Add java, mono and emacs support.
DEFAULT_SRC_CONFIGURE_PARAMS=(
    --disable-csharp
    --disable-java
    --with-packager="Exherbo"
    --with-packager-version="${PNVR}"
    --with-packager-bug-reports="http://bugs.exherbo.org/"
)
DEFAULT_SRC_CONFIGURE_OPTION_ENABLES=( nls )

src_install() {
    default

    # Don't install emacs things without proper support for it
    rm -rf "${IMAGE}"/usr/share/emacs || die "Removing emacsy things failed"

    if option doc ; then
        dodir /usr/share/doc/${PNVR}
        insinto /usr/share/doc/${PNVR}
        doins -r doc/reference/html
    fi
}

