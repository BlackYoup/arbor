# Copyright 2007 Bryan Ã˜stergaard
# Distributed under the terms of the GNU General Public License v2

SUMMARY="Free software emulation of curses using Terminfo formats"
HOMEPAGE="http://www.gnu.org/software/ncurses"
SRC_URI="mirror://gnu/${PN}/${P}.tar.gz"

LICENSE="as-is"
SLOT="0"
PLATFORMS="~amd64 ~ia64 ~x86"
MYOPTIONS="unicode"

DEPENDENCIES=""

src_configure() {
    ECONF_SOURCE="${S}"
    common_conf="--with-shared \
        --with-normal \
        --without-termcap \
        --libdir=/lib"

    mkdir "${S}/narrow"
    cd "${S}/narrow"
    econf ${common_conf}

    if option unicode ; then
        mkdir "${S}/wide"
        cd "${S}/wide"
        econf \
            ${common_conf} \
            $(option_enable unicode widec)
    fi
}

src_compile() {
    cd "${S}/narrow"
    emake

    if option unicode ; then
        cd "${S}/wide"
        emake
    fi
}

src_install() {
    # Install narrow char version
    cd "${S}/narrow"
    default

    # Install wide char version if unicode is enabled
    if option unicode ; then
        cd "${S}/wide"
        default
    fi
}

