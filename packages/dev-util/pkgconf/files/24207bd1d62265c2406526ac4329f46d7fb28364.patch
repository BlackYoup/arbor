Upstream: yes, in master
From 24207bd1d62265c2406526ac4329f46d7fb28364 Mon Sep 17 00:00:00 2001
From: Baptiste Daroussin <bapt@FreeBSD.org>
Date: Sun, 17 Mar 2013 23:45:51 +0100
Subject: [PATCH] Do not overwrite eflags with walking though a long list of
 packages

---
 pkg.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pkg.c b/pkg.c
index e1fdac8..ed23b47 100644
--- a/pkg.c
+++ b/pkg.c
@@ -890,7 +890,7 @@ static bool pkg_comparator_unimplemented(pkg_t *pkg, pkg_dependency_t *pkgdep)
 		}
 
 		pkgdep->flags |= PKG_PROPF_SEEN;
-		eflags = pkg_traverse(pkgdep, func, data, depth - 1, flags);
+		eflags |= pkg_traverse(pkgdep, func, data, depth - 1, flags);
 		pkgdep->flags &= ~PKG_PROPF_SEEN;
 		pkg_unref(pkgdep);
 	}
-- 
1.8.1.5

