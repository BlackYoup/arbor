# Copyright 2007 Alexander Færøy <ahf@exherbo.org>
# Distributed under the terms of the GNU General Public License v2

require subversion eutils

DESCRIPTION="A Repoman replacement written in C++"
HOMEPAGE="http://www.eroyf.org/"
SRC_URI=""

LICENSE="GPL-2"
SLOT="0"
PLATFORMS="~amd64 ~ia64 ~x86"
MYOPTIONS="pink git cvs"

DEPENDENCIES="
build+run:
    >=sys-apps/paludis-0.25
run:
    dev-scm/subversion
    cvs? ( dev-scm/cvs )
    git? ( dev-scm/git )"

ESVN_REPO_URI="svn://svn.pioto.org/reprehendo/trunk"
ESVN_BOOTSTRAP="./autogen.bash"

src_unpack() {
    subversion_src_unpack
}

src_compile() {
    econf \
        $(option_enable pink) \
        $(option_enable git)  \
        --with-default-layout=exheres \
        || die "econf failed"

    emake || die "emake failed"
}

src_install() {
    emake install DESTDIR="${D}" || die "emake failed"
    dodoc AUTHORS ChangeLog
}
